<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: gui/widget/LayersPane.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: gui/widget/LayersPane.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * MLJLib
 * MeshLabJS Library
 * 
 * Copyright(C) 2015
 * Paolo Cignoni 
 * Visual Computing Lab
 * ISTI - CNR
 * 
 * All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify it under 
 * the terms of the GNU General Public License as published by the Free Software 
 * Foundation; either version 2 of the License, or (at your option) any later 
 * version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT 
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS 
 * FOR A PARTICULAR PURPOSE. See theGNU General Public License 
 * (http://www.gnu.org/licenses/gpl.txt) for more details.
 * 
 */

/**
 * @file Defines and installs the Layers pane widget that provides the features of
 * select and show/hide layers
 * @author Stefano Gabriele
 */
(function (component) {
    
    /**         
     * @class Create a new Layers Pane widget
     * @augments  MLJ.gui.widget.Widget
     * @private
     * @memberOf MLJ.gui.widget
     * @author Stefano Gabriele 
     */
    var _LayersPane = function () {

        var _$layers = $('&lt;div id="mlj-layers" class="ui-widget-content">&lt;/div>');

        var _selectedName;

        function select(name) {
            //Just one
            var $sel = _$layers.find("[class*='selected']");
            $sel.each(function (key, value) {
                $(value).removeClass("selected");
            });

            //Just one
            $sel = _$layers.find("[name='" + name + "']");
            $sel.each(function (key, value) {
                $sel = $(value).addClass("selected");
                _selectedName = name;
            });
        }

        function initEventHandlers() {
            //On new mesh added
            $(document).on("SceneLayerAdded",
                    function (event, mesh) {
                        //Add item to layers pane widget
                        MLJ.widget.LayersPane.addLayer(mesh.name);

                        var infoWidg = MLJ.gui.getWidget("Info");
                        //Clear info area
                        infoWidg.clear();

                        //Add mesh info to info widget
                        infoWidg.append("Current Mesh: " + mesh.name);
                        infoWidg.append("Vertices: " + mesh.VN);
                        infoWidg.append("Faces: " + mesh.FN);
                    });

            $(document).on("SceneLayerSelected",
                    function (event, mesh) {

                        var infoWidg = MLJ.gui.getWidget("Info");

                        //Clear info area
                        infoWidg.clear();

                        //Add mesh info to info widget
                        infoWidg.append("Current Mesh: " + mesh.name);
                        infoWidg.append("Vertices: " + mesh.VN);
                        infoWidg.append("Faces: " + mesh.FN);

                    });

            $(document).on("SceneLayerUpdated",
                    function (event, mesh) {
                        //UPDATE INFO                        
                        if (_selectedName === mesh.name) {
                            var infoWidg = MLJ.gui.getWidget("Info");
                            //Clear info area
                            infoWidg.clear();

                            //Add mesh info to info widget
                            infoWidg.append("Current Mesh: " + mesh.name);
                            infoWidg.append("Vertices: " + mesh.VN);
                            infoWidg.append("Faces: " + mesh.FN);
                        }

                    });
        }
        
        /**
         * Returns the name of the selected layer
         * @returns {String} The name of the selected layer
         * @author Stefano Gabriele
         */
        this.getSelectedName = function () {
            return _selectedName;
        };
        
        /**          
         * @author Stefano Gabriele
         */
        this._make = function () {//build function 
            initEventHandlers();
            return _$layers;
        };
        
        /**
         * Adds a new layer
         * @param {String} name The name of the layer
         * @author Stefano Gabriele
         */
        this.addLayer = function (name) {

            var $wrap = $('&lt;div class="mlj-layers-entry">&lt;/div>')
                    .css({position: "relative", width: "100%"});
            var $layer = $('&lt;div class="mlj-layer" name="' + name + '">' + name + '&lt;/div>')
                    .css({position: "absolute"});
            var $eye = $('&lt;div class="mlj-eye show">&lt;/div>')
                    .css({position: "absolute"});
            $wrap.append($eye).append($layer);
            _$layers.append($wrap);
            select(name);

            $layer.click(function () {
                if ($layer.attr("name") !== _selectedName) {
                    select(name);
                    MLJ.core.Scene.selectLayerByName(name);
                }
            });

            $eye.click(function () {
                if ($eye.hasClass("show")) {
                    $eye.removeClass("show").addClass("hide");
                    MLJ.core.Scene.setLayerVisible(name, false);
                } else {
                    $eye.removeClass("hide").addClass("show");
                    MLJ.core.Scene.setLayerVisible(name, true);
                }
            });
        };

    };

    MLJ.extend(MLJ.gui.widget.Widget, _LayersPane);

    //Install widget
    MLJ.gui.installWidget("LayersPane", new _LayersPane());

})(MLJ.gui.component);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MLJ.core.AmbientLight.html">AmbientLight</a></li><li><a href="MLJ.core.Headlight.html">Headlight</a></li><li><a href="MLJ.core.MeshFile.html">MeshFile</a></li><li><a href="MLJ.core.PhongMaterial.html">PhongMaterial</a></li><li><a href="MLJ.core.plugin.Filter.html">Filter</a></li><li><a href="MLJ.core.plugin.GUIBuilder.html">GUIBuilder</a></li><li><a href="MLJ.core.plugin.Plugin.html">Plugin</a></li><li><a href="MLJ.core.plugin.Rendering.html">Rendering</a></li><li><a href="MLJ.Error.html">Error</a></li><li><a href="MLJ.gui.widget._Info.html">_Info</a></li><li><a href="MLJ.gui.widget._LayersPane.html">_LayersPane</a></li><li><a href="MLJ.gui.widget._Log.html">_Log</a></li><li><a href="MLJ.gui.widget._Logo.html">_Logo</a></li><li><a href="MLJ.gui.widget._SceneBar.html">_SceneBar</a></li><li><a href="MLJ.gui.widget._SearchTool.html">_SearchTool</a></li><li><a href="MLJ.gui.widget.Widget.html">Widget</a></li><li><a href="MLJ.util.AssociativeArray.html">AssociativeArray</a></li><li><a href="MLJ.util.AssociativeArray-_Iterator.html">_Iterator</a></li></ul><h3>Events</h3><ul><li><a href="MLJ.core.File.html#event:MeshFileOpened">MeshFileOpened</a></li><li><a href="MLJ.core.File.html#event:MeshFileReloaded">MeshFileReloaded</a></li><li><a href="MLJ.core.Scene.html#event:SceneLayerAdded">SceneLayerAdded</a></li><li><a href="MLJ.core.Scene.html#event:SceneLayerSelected">SceneLayerSelected</a></li><li><a href="MLJ.core.Scene.html#event:SceneLayerUpdated">SceneLayerUpdated</a></li></ul><h3>Namespaces</h3><ul><li><a href="MLJ.html">MLJ</a></li><li><a href="MLJ.core.html">core</a></li><li><a href="MLJ.core.File.html">File</a></li><li><a href="MLJ.core.plugin.html">plugin</a></li><li><a href="MLJ.core.Scene.html">Scene</a></li><li><a href="MLJ.gui.html">gui</a></li><li><a href="MLJ.gui.widget.html">widget</a></li><li><a href="MLJ.util.html">util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Module">Module</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a> on Tue Jun 30 2015 00:59:47 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
